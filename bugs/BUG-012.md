# BUG-012: LazyGit が ToggleTerm 内で一瞬開いてすぐ閉じる

## 問題概要
`<leader>tg` で LazyGit を ToggleTerm 経由で開こうとすると、ウィンドウが一瞬表示されてすぐに閉じてしまい、LazyGit が使用できない状態。

## 現象
- `<leader>tg` 実行時にフロートウィンドウが一瞬開く
- すぐにウィンドウが閉じて LazyGit が終了する
- コマンドラインから直接 `lazygit` を実行しても同様のエラーが発生

## 影響度
**緊急度: 中** - Git操作のワークフローが大幅に阻害され、LazyVim の主要機能の一つが使用不能

## 調査記録

### 調査 #1 (2025-08-08)

#### 現在の状況
- [x] LazyGit のインストール確認 → インストール済み (v0.54.0)
- [x] 直接実行でのエラー確認 → `/dev/tty: device not configured` エラー
- [x] ToggleTerm との統合設定確認

#### 発見事項
- LazyGit が `/dev/tty` デバイスにアクセスしようとして失敗
- ToggleTerm のターミナル環境では `/dev/tty` が利用できない
- エラーメッセージ: `*fs.PathError open /dev/tty: device not configured`

#### 試した修正方法
1. 環境変数 `TERM = "xterm-256color"` 追加 → 未解決
2. `on_exit` ハンドラー追加でファイル更新処理 → 未解決
3. 代替コマンド `<leader>tG` (`!lazygit`) 追加 → 回避策として実装

---

## 修正履歴

### 2025-08-08 - 初期修正試行
- 環境変数設定の追加
- 代替起動方法の実装
- 結果: 根本的解決に至らず、回避策のみ実装

---

## 依存関係・関連Issue

- 関連プラグイン: toggleterm.nvim, LazyGit
- 設定ファイル: `/Users/ren/.config/nvim/lua/plugins/toggleterm.lua`
- 関連Issue: なし

---

## 完了条件

- [ ] `<leader>tg` で LazyGit が正常に起動する
- [ ] ToggleTerm 内で LazyGit が安定動作する
- [ ] `/dev/tty` エラーが発生しない

## 次のアクション

1. ToggleTerm の代替案（Neogit、Fugitive）の検討
2. LazyGit の設定ファイルでの tty 無効化オプションの調査
3. フロートターミナル以外の起動方法の検討
4. LazyVim コミュニティでの同様問題の調査